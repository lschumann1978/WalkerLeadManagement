<h1>Add New Lead</h1>

<form [formGroup]="leadForm" (ngSubmit)="onSubmit()">
  <div>
    <label for="name">Name:</label>
    <input id="name" formControlName="name" />
    @if (leadForm.get('name')?.invalid && leadForm.get('name')?.touched) {
      <small>Name is required.</small>
    }
  </div>

  <div>
    <label for="phoneNumber">Phone Number:</label>
    <input
      id="phoneNumber"
      formControlName="phoneNumber"
      (input)="formatPhoneNumber($event)"
      maxlength="14"
      placeholder="(###) ###-####"
    />
    @if (leadForm.get('phoneNumber')?.invalid && leadForm.get('phoneNumber')?.touched) {
      <small>Phone number must be 10 digits.</small>
    }
  </div>

  <div>
    <label for="zipCode">Zip Code:</label>
    <input id="zipCode" formControlName="zipCode" />
    @if (leadForm.get('zipCode')?.invalid && leadForm.get('zipCode')?.touched) {
      <small>Zip code is required.</small>
    }
  </div>

  <div>
    <label for="email">Email (Optional):</label>
    <input id="email" formControlName="email" />
    @if (leadForm.get('email')?.invalid && leadForm.get('email')?.touched) {
      <small>Invalid email format.</small>
    }
  </div>

  <div>
    <label>
      <input type="checkbox" formControlName="isEmailPermitted" />
      Allow Email Communication
    </label>
  </div>

  <div>
    <label>
      <input type="checkbox" formControlName="isTextPermitted" />
      Allow Text Communication
    </label>
  </div>

  <button type="submit" [disabled]="leadForm.invalid">Save</button>
  <button type="button" (click)="onCancel()">Cancel</button>
</form>
